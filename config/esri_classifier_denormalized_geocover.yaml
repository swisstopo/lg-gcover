# Extended YAML configuration for applying multiple classifications

# Global settings (optional)
global:
    treat_zero_as_null: true
    symbol_field: MAP_SYMBOL
    label_field: LABEL
    overwrite: false
# Layer configurations
layers:
    - gpkg_layer: surfaces
      layer_type: polygon
      field_types:
        KIND: Int64 # `Int64` with capital `I` is a nullable integer...
      classifications:
        - style_file: styles/Surfaces.lyrx
          classification_name: Surfaces
          mapfile_name: surfaces
          fields:
            # Map GPKG field to classification field (can be complex paths)
            KIND: KIND
          symbol_prefix: surfaces
          # Dummy, for testing filter: "KIND == 12001002"

    - gpkg_layer: exploit_points
      layer_type: point
      field_types:
        KIND: Int64 # `Int64` with capital `I` is a nullable integer...
      classifications:
        - style_file: styles/Exploit_Geomat_Pt.lyrx
          classification_name: Exploit_Geomat_Pt
          filter: KIND=10601001
          symbol_prefix: geomat_pnt
          fields:
            KIND: KIND
            AEXP_STATUS: AEXP_STATUS

    - gpkg_layer: fossils
      layer_type: point
      field_types:
        KIND: Int64
        LFOS_DIVISION: Int64
        LFOS_STATUS: Int64
      classifications:
        - style_file: styles/Fossils.lyrx
          classification_name: Fossils
          mapfile_name: fossils
          fields:
            # Map GPKG field to classification field (can be complex paths)
            KIND: KIND
            LFOS_DIVISION: LFOS_DIVISION
            LFOS_STATUS: LFOS_STATUS
          symbol_prefix: fossil
    - gpkg_layer: exploit_geomat_plg
      layer_type: polygon
      field_types:
        KIND: Int64
      classifications:
        - style_file: styles/Exploit_Geomat_Plg.lyrx
          classification_name: Exploit_Geomat_Plg
          mapfile_name: exploit_geomat_plg
          fields:
            # Map GPKG field to classification field (can be complex paths)
            KIND: KIND
          symbol_prefix: geomat_plg
    # Complex case: Multiple classifications for same layer
    # Bedrock example with complex field mapping
    - gpkg_layer: bedrock
      layer_type: polygon
      field_types:
        KIND: Int64
        RUNC_LITHO: Int64
        RUNC_CHRONO_T: Int64
        RUNC_CHRONO_B: Int64
        RUNC_MORPHOLO: Int64
        RUNC_GLAC_TYP: Int64
      classifications:
        - style_file: styles/Bedrock.lyrx
          classification_name: Bedrock
          mapfile_name: bedrock
          fields:
            # Map GPKG field to classification field (can be complex paths)
            GMU_CODE: TOPGIS_GC.GC_GEOL_MAPPING_UNIT_ATT.GEOL_MAPPING_UNIT
          symbol_prefix: bedrock
          filter: KIND == 14334001
    - gpkg_layer: linear_objects
      layer_type: line
      field_types:
        KIND: Int64
        TTEC_STATUS: Int64
        TTEC_LIM_TYP: Int64
        LPRO_LITHO: Int64
      classifications:
        - style_file: styles/Linear Objects_GeolKontur.lyrx
          classification_name: Linear Objects_GeolKontur
          mapfile_name: geolkontur
          fields:
                KIND: KIND
                LGEO_STATUS: LGEO_STATUS
          symbol_prefix: geolkontur
          filter: KIND = 13001001
        - style_file: styles/Linear Objects_Gesteinhorizont.lyrx
          classification_name: Linear Objects_Gesteinhorizont
          mapfile_name: gesteinhorizont
          fields:
            KIND: KIND
            LPRO_LITHO: LPRO_LITHO
          symbol_prefix: gesteinhorizont
          filter: KIND = 13101001
        - style_file: styles/Linear Objects_Hilfs_Karto.lyrx
          classification_name: Linear Objects_Hilfs_Karto
          mapfile_name: hilfs_karto
          fields:
            KIND: KIND
          symbol_prefix: hilfs_karto
          filter: KIND IN (15601001, 15601002)

        - style_file: styles/Linear Objects_Bruch.lyrx
          classification_name: Linear Objects_Bruch
          mapfile_name: surfaces
          fields:
            # Map GPKG field to classification field (can be complex paths)
            KIND: KIND
            TTEC_STATUS: TTEC_STATUS
          symbol_prefix: linear_bruch
          filter: KIND IN (14901002,14901004,14901005,14901006,14901007,14901008) # definitionExpression
        - style_file: styles/Linear Objects_Ueberschiebung.lyrx
          classification_name: Linear Objects_Ueberschiebung
          filter: KIND = 14901001
          fields:
            # Map GPKG field to classification field (can be complex paths)
            KIND: KIND
            TTEC_LIM_TYP: TTEC_LIM_TYP
            TTEC_STATUS: TTEC_STATUS
          symbol_prefix: linear_ueberschiebung
    - gpkg_layer: point_objects
      layer_type: point
      field_types:
        KIND: Int64
        HSUR_STATUS: Int64
        HSUR_TYPE: Int64
        RUNC_PROTECTED: Int64
        RUNC_ROCK_TYP: Int64
        RUNC_PROTECTED: Int64
        MPLA_POLARITY: Int64
        DIP: Int64
        ABOR_FM_A: Int64
        MPLA_POLARITY: Int64
        TDEF_FOLD_TYP: Int64
        AEXP_STATUS: Int64



      classifications:
        - style_file: styles/Point_Mpla_Planar_Structures.lyrx
          classification_name: Point_Mpla_Planar_Structures
          filter: KIND IN (13801001,13801002, 13801004, 13801003, 13801005, 13801006)
          fields:
            # Map GPKG field to classification field (can be complex paths)
            KIND: KIND
            MPLA_POLARITY: MPLA_POLARITY
            DIP: DIP
          symbol_prefix: planar_struct
        - style_file: styles/Point Objects_Achsenfl채che.lyrx
          classification_name: Point Objects_Achsenfl채che
          filter: KIND=14601006
          fields:
            # Map GPKG field to classification field (can be complex paths)
            KIND: KIND
            TDEF_FOLD_TYP: TDEF_FOLD_TYP
          symbol_prefix: achsenflaeche
        - style_file: styles/Point Objects_Orient.lyrx
          classification_name: Point Objects_Orient
          filter: KIND IN (11901001,12501002,12501003,12501004,12501006,12101006,13601001,13601002 ,13601003,13701001,13701002,13701004,14601004)
          fields:
            # Map GPKG field to classification field (can be complex paths)
            KIND: KIND
          symbol_prefix: orient
        - style_file: styles/Point_Objects_Bohrung_Fels_erreicht.lyrx
          classification_name: Point_Objects_Bohrung_Fels_erreicht
          filter: KIND=10501001 AND ABOR_DEPTH_BEDR<>999
          fields:
            # Map GPKG field to classification field (can be complex paths)
            KIND: KIND
            ABOR_FM_A: ABOR_FM_A
          symbol_prefix: bohrung_fels_erreicht
        - style_file: styles/Point_Objects_Sondierung.lyrx
          classification_name: Point_Objects_Sondierung
          filter: KIND IN (1051002,10501003,10501004,10501005)
          symbol_prefix: sondierung
          fields:
            KIND: KIND
            ABOR_DEPTH_BEDR: ABOR_DEPTH_BEDR

        - style_file: styles/Point_Objects_Bohrung_Fels_nicht_erreicht.lyrx
          classification_name: Point_Objects_Bohrung_Fels_nicht_erreicht
          filter: KIND IN 10501001 AND ABOR_DEPTH_BEDR = 999
          fields:
            # Map GPKG field to classification field (can be complex paths)
            KIND: KIND
            ABOR_DEPTH_BEDR: ABOR_DEPTH_BEDR
          symbol_prefix: bohrung_fels_nicht_erreicht
        - style_file: styles/Point Objects_Quelle.lyrx
          classification_name: Point Objects_Quelle
          fields:
            # Map GPKG field to classification field (can be complex paths)
            KIND: KIND
            HSUR_TYPE: HSUR_TYPE
            HSUR_STATUS: HSUR_STATUS
          symbol_prefix: point_quelle
        - style_file: styles/Point Objects_Erraticker.lyrx
          classification_name: Point Objects_Erraticker
          filter: KIND IN (14401001,14401002) AND (PRINTED = 1 OR PRINTED IS NULL)
          fields:
            # Map GPKG field to classification field (can be complex paths)
            KIND: KIND
            RUNC_ROCK_TYP: RUNC_ROCK_TYP
            RUNC_PROTECTED: RUNC_PROTECTED
          symbol_prefix: point_erratiker
        - style_file: styles/Point Objects_Orient.lyrx
          classification_name: Point Objects_Orient
          fields:
            # Map GPKG field to classification field (can be complex paths)
            KIND: KIND
          symbol_prefix: pnt_orient

    - gpkg_layer: unco_deposits
      layer_type: polygon
      field_types:
        KIND: Int64
        RUNC_LITHO: Int64
        RUNC_CHRONO_T: Int64
        RUNC_CHRONO_B: Int64
        RUNC_MORPHOLO: Int64
        RUNC_GLAC_TYP: Int64
      classifications:
        - style_file: styles/Unco Deposits_Bachschutt.lyrx
          classification_name: Unco Deposits_Bachschutt
          # filter: RUNC_LITHO NOT IN (15101009, 15101015,15101019, 15101021, 15101027, 15101028, 15101029, 15101030, 15101031, 15101032, 15101033, 15101034, 15101041,15101046, 15101047, 15101048, 15101049, 15101055, 15101058, 15101040)
          symbol_prefix: unco_bachschutt
          fields:
            KIND: KIND
            RUNC_LITHO: RUNC_LITHO
            RUNC_MORPHOLO: RUNC_MORPHOLO
            RUNC_CHRONO_B: RUNC_CHRONO_B # missing
        - style_file: styles/Unco Deposits_Litho__20000.lyrx
          classification_name: Unco Deposits_Litho_<20000
          # filter: RUNC_LITHO NOT IN (15101009, 15101015,15101019, 15101021, 15101027, 15101028, 15101029, 15101030, 15101031, 15101032, 15101033, 15101034, 15101041,15101046, 15101047, 15101048, 15101049, 15101055, 15101058, 15101040)
          symbol_prefix: unco_litho
          fields:
            KIND: KIND
            RUNC_LITHO: RUNC_LITHO
        - style_file: styles/Unco Deposits_Chrono_Mor채ne.lyrx
          classification_name: Unco Deposits_Chrono_Mor채ne
          # filter: RUNC_LITHO NOT IN (15101009, 15101015,15101019, 15101021, 15101027, 15101028, 15101029, 15101030, 15101031, 15101032, 15101033, 15101034, 15101041,15101046, 15101047, 15101048, 15101049, 15101055, 15101058, 15101040)
          symbol_prefix: unco_chrono_moraene
          fields:
            KIND: KIND
            RUNC_LITHO: RUNC_LITHO.
            RUNC_GLAC_TYP: RUNC_GLAC_TYP
            RUNC_CHRONO_T: RUNC_CHRONO_T # missing
        - style_file: styles/Unco Deposits_Chrono_T.lyrx
          classification_name: Unco Deposits_Chrono_T
          # filter: RUNC_LITHO NOT IN (15101009, 15101015,15101019, 15101021, 15101027, 15101028, 15101029, 15101030, 15101031, 15101032, 15101033, 15101034, 15101041,15101046, 15101047, 15101048, 15101049, 15101055, 15101058, 15101040)
          symbol_prefix: unco_chrono_t
          fields:
            KIND: KIND
            RUNC_LITHO: RUNC_LITHO.
            RUNC_GLAC_TYP: RUNC_GLAC_TYP
            RUNC_CHRONO_T: RUNC_CHRONO_T # missing
        - style_file: styles/Unco Deposits_Chrono_B.lyrx
          classification_name: Unco Deposits_Chrono_B
          # filter: RUNC_LITHO NOT IN (15101009, 15101015,15101019, 15101021, 15101027, 15101028, 15101029, 15101030, 15101031, 15101032, 15101033, 15101034, 15101041,15101046, 15101047, 15101048, 15101049, 15101055, 15101058, 15101040)
          symbol_prefix: unco_chrono_b
          fields:
            KIND: KIND
            RUNC_LITHO: RUNC_LITHO.
            RUNC_GLAC_TYP: RUNC_GLAC_TYP
            RUNC_CHRONO_T: RUNC_CHRONO_T
            RUNC_CHRONO_B: RUNC_CHRONO_B
